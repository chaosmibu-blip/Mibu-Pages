å°ˆæ¡ˆæ¦‚è¿°
å®˜ç¶²å®šä½
Mibu å®˜æ–¹ç¶²ç«™æ˜¯é¢å‘å•†å®¶çš„ B2B å¹³å°ï¼Œä¸»è¦åŠŸèƒ½ï¼š

å•†å®¶è¨‚é–±è³¼è²·ï¼ˆPro/Premium æ–¹æ¡ˆï¼‰
ç¨‹å¼åŒ– SEO é é¢ï¼ˆåŸå¸‚/æ™¯é»ï¼‰
å•†å®¶ç™»å…¥èˆ‡ç®¡ç†å¾Œå°
å“ç‰Œè¡ŒéŠ·èˆ‡ä¸‹è¼‰å¼•å°
æ ¸å¿ƒé é¢
é é¢	è·¯ç”±	ç›®çš„
é¦–é 	/	å“ç‰Œä»‹ç´¹ã€App ä¸‹è¼‰å¼•å°
å•†å®¶åˆä½œ	/for-business	å•†å®¶æœå‹™ä»‹ç´¹
è¨‚é–±æ–¹æ¡ˆ	/for-business/pricing	æ–¹æ¡ˆæ¯”è¼ƒèˆ‡è³¼è²·
å•†å®¶ç™»å…¥	/merchant/login	Email + å¯†ç¢¼ç™»å…¥
å•†å®¶å¾Œå°	/merchant/dashboard	è¨‚é–±ç®¡ç†ã€æ•¸æ“šæ¦‚è¦½
åŸå¸‚åˆ—è¡¨	/explore	SEOï¼šæ‰€æœ‰åŸå¸‚
åŸå¸‚è©³æƒ…	/city/[slug]	SEOï¼šåŸå¸‚æ™¯é»åˆ—è¡¨
æ™¯é»è©³æƒ…	/place/[slug]	SEOï¼šå–®ä¸€æ™¯é»è³‡è¨Š
æŠ€è¡“æ£§è¦ç¯„
å¿…ç”¨æ¡†æ¶
é¡åˆ¥	æŠ€è¡“	ç‰ˆæœ¬
æ¡†æ¶	Next.js (App Router)	15.x
æ¨£å¼	Tailwind CSS	3.x
UI å…ƒä»¶	shadcn/ui	æœ€æ–°
ç‹€æ…‹ç®¡ç†	TanStack Query	5.x
è¡¨å–®	React Hook Form + Zod	æœ€æ–°
åœ–ç¤º	Lucide React	æœ€æ–°
å‹•ç•«	Framer Motion	æœ€æ–°
ç¦æ­¢äº‹é …
ç¦æ­¢ä½¿ç”¨ HTML åŸç”Ÿæ¨™ç±¤åšæ¨£å¼ï¼ˆä½¿ç”¨ Tailwindï¼‰
ç¦æ­¢ inline styleï¼ˆé™¤éå‹•æ…‹è¨ˆç®—ï¼‰
ç¦æ­¢åœ¨ Client Component ä½¿ç”¨ async/awaitï¼ˆç”¨ useQueryï¼‰
ç¦æ­¢ç¡¬ç·¨ç¢¼å¾Œç«¯ URLï¼ˆä½¿ç”¨ç’°å¢ƒè®Šæ•¸ï¼‰
å®˜ç¶² replit.md ç¯„æœ¬
è«‹å°‡ä»¥ä¸‹å…§å®¹è²¼å…¥å®˜ç¶²å°ˆæ¡ˆçš„ replit.mdï¼š

# Mibu å®˜æ–¹ç¶²ç«™
## å°ˆæ¡ˆç°¡ä»‹
Mibu å®˜æ–¹ç¶²ç«™æ˜¯é¢å‘å•†å®¶çš„ B2B å¹³å°ï¼Œæä¾›è¨‚é–±è³¼è²·ã€å•†å®¶ç™»å…¥ã€SEO é é¢ç­‰åŠŸèƒ½ã€‚
## è§’è‰²å®šç¾©
ä½ æ˜¯**å‰ç«¯å·¥ç¨‹å¸«**ï¼Œè² è²¬å¯¦ä½œå®˜ç¶²åŠŸèƒ½ï¼Œæ¥å—å¾Œç«¯é¦–å¸­æ¶æ§‹å¸«çš„æŠ€è¡“æŒ‡æ®ã€‚
### æŠ€è¡“æ£§
- Next.js 15 (App Router)
- Tailwind CSS 3.x
- shadcn/ui
- TanStack Query 5.x
- React Hook Form + Zod
## åŸå‰‡
1. å…¨ç¨‹ä½¿ç”¨ä¸­æ–‡æºé€š
2. éµå¾ªå¾Œç«¯æä¾›çš„ API å¥‘ç´„
3. æ‰€æœ‰é é¢éœ€éŸ¿æ‡‰å¼ï¼ˆæ‰‹æ©Ÿå„ªå…ˆï¼‰
4. SEO é é¢ä½¿ç”¨ SSR/SSG
## å¾Œç«¯ API
| ç’°å¢ƒ | URL |
|------|-----|
| é–‹ç™¼ | `https://591965a7-25f6-479c-b527-3890b1193c21-00-1m08cwv9a4rev.picard.replit.dev` |
| ç”Ÿç”¢ | `https://gacha-travel--s8869420.replit.app` |
## è¨˜æ†¶åº«ç´¢å¼•
| æª”æ¡ˆ | è·æ¬Šç¯„åœ |
|------|---------|
| memory-web-pages.md | é é¢çµæ§‹ã€è·¯ç”±å®šç¾© |
| memory-web-components.md | å…±ç”¨å…ƒä»¶åº« |
| memory-web-api.md | API æ•´åˆã€hook å®šç¾© |
| memory-web-auth.md | èªè­‰æ©Ÿåˆ¶ï¼ˆCookie JWTï¼‰ |
| memory-web-payment.md | é‡‘æµæ•´åˆï¼ˆStripe/Recurï¼‰ |
| memory-web-seo.md | SEO é é¢ã€Meta è¨­å®š |
## ç’°å¢ƒè®Šæ•¸
\`\`\`env
NEXT_PUBLIC_API_URL=å¾Œç«¯ API URL
NEXT_PUBLIC_RECUR_PUBLISHABLE_KEY=Recur å…¬é–‹é‡‘é‘°
\`\`\`
## è¼¸å‡ºå”è­°
å®ŒæˆåŠŸèƒ½å¾Œè¼¸å‡ºï¼š
- è·¯ç”±/æª”æ¡ˆè®Šæ›´
- å…ƒä»¶ Props å®šç¾©
- API ä¾è³´
è¨˜æ†¶åº«æ¸…å–®
å®˜ç¶²éœ€å»ºç«‹ä»¥ä¸‹è¨˜æ†¶åº«ï¼ˆå­˜æ”¾æ–¼ docs/ ç›®éŒ„ï¼‰ï¼š

1. memory-web-pages.md
# å®˜ç¶²é é¢çµæ§‹
## è·¯ç”±å®šç¾©
| è·¯ç”± | æª”æ¡ˆ | èªªæ˜ | èªè­‰ |
|------|------|------|------|
| `/` | `app/page.tsx` | é¦–é  | ç„¡ |
| `/for-business` | `app/for-business/page.tsx` | å•†å®¶åˆä½œé  | ç„¡ |
| `/for-business/pricing` | `app/for-business/pricing/page.tsx` | è¨‚é–±æ–¹æ¡ˆé  | ç„¡ |
| `/merchant/login` | `app/merchant/login/page.tsx` | å•†å®¶ç™»å…¥ | ç„¡ |
| `/merchant/dashboard` | `app/merchant/dashboard/page.tsx` | å•†å®¶å¾Œå° | éœ€ç™»å…¥ |
| `/explore` | `app/explore/page.tsx` | åŸå¸‚åˆ—è¡¨ | ç„¡ |
| `/city/[slug]` | `app/city/[slug]/page.tsx` | åŸå¸‚è©³æƒ… | ç„¡ |
| `/place/[slug]` | `app/place/[slug]/page.tsx` | æ™¯é»è©³æƒ… | ç„¡ |
## é é¢ç‹€æ…‹
- [ ] é¦–é 
- [ ] å•†å®¶åˆä½œé 
- [ ] è¨‚é–±æ–¹æ¡ˆé 
- [ ] å•†å®¶ç™»å…¥
- [ ] å•†å®¶å¾Œå°
- [ ] åŸå¸‚åˆ—è¡¨
- [ ] åŸå¸‚è©³æƒ…
- [ ] æ™¯é»è©³æƒ…
2. memory-web-components.md
# å®˜ç¶²å…ƒä»¶åº«
## å…±ç”¨å…ƒä»¶
| å…ƒä»¶ | ä½ç½® | èªªæ˜ |
|------|------|------|
| Header | `components/layout/Header.tsx` | ç¶²ç«™é ­éƒ¨å°èˆª |
| Footer | `components/layout/Footer.tsx` | ç¶²ç«™åº•éƒ¨ |
| Container | `components/layout/Container.tsx` | å…§å®¹å®¹å™¨ |
| Button | `components/ui/button.tsx` | shadcn/ui æŒ‰éˆ• |
| Card | `components/ui/card.tsx` | shadcn/ui å¡ç‰‡ |
## æ¥­å‹™å…ƒä»¶
| å…ƒä»¶ | ä½ç½® | èªªæ˜ |
|------|------|------|
| PricingCard | `components/pricing/PricingCard.tsx` | è¨‚é–±æ–¹æ¡ˆå¡ç‰‡ |
| PaymentMethodSelector | `components/payment/PaymentMethodSelector.tsx` | é‡‘æµé¸æ“‡å™¨ |
| LoginForm | `components/auth/LoginForm.tsx` | ç™»å…¥è¡¨å–® |
| SubscriptionStatus | `components/merchant/SubscriptionStatus.tsx` | è¨‚é–±ç‹€æ…‹é¡¯ç¤º |
| CityCard | `components/seo/CityCard.tsx` | åŸå¸‚å¡ç‰‡ |
| PlaceCard | `components/seo/PlaceCard.tsx` | æ™¯é»å¡ç‰‡ |
3. memory-web-api.md
# API æ•´åˆè¦ç¯„
## API Client è¨­å®š
\`\`\`typescript
// lib/api/client.ts
const API_URL = process.env.NEXT_PUBLIC_API_URL || '';
export async function apiClient<T>(
  endpoint: string,
  options: RequestInit = {}
): Promise<T> {
  const res = await fetch(\`\${API_URL}\${endpoint}\`, {
    ...options,
    headers: {
      'Content-Type': 'application/json',
      ...options.headers,
    },
    credentials: 'include',
  });
  if (!res.ok) {
    const error = await res.json().catch(() => ({}));
    throw new ApiError(res.status, error.message || 'Request failed');
  }
  return res.json();
}
\`\`\`
## è‡ªè¨‚ Hooks
| Hook | ç”¨é€” |
|------|------|
| useAuth | èªè­‰ç‹€æ…‹ç®¡ç† |
| useMerchant | å•†å®¶è³‡æ–™ |
| useSubscription | è¨‚é–±ç‹€æ…‹ |
| useSubscriptionPlans | è¨‚é–±æ–¹æ¡ˆåˆ—è¡¨ |
| useCities | åŸå¸‚åˆ—è¡¨ |
| useCity | å–®ä¸€åŸå¸‚è©³æƒ… |
| usePlace | å–®ä¸€æ™¯é»è©³æƒ… |
4. memory-web-auth.md
# èªè­‰æ©Ÿåˆ¶
## Cookie-based JWT
| é …ç›® | å€¼ |
|------|-----|
| Cookie åç¨± | auth_token |
| é¡å‹ | HttpOnly, Secure |
| æœ‰æ•ˆæœŸ | 7 å¤© |
| SameSite | Lax |
## èªè­‰æµç¨‹
1. POST /api/merchant/login â†’ å¾Œç«¯è¨­å®š Cookie
2. å¾ŒçºŒè«‹æ±‚è‡ªå‹•å¸¶ Cookie â†’ å¾Œç«¯é©—è­‰ JWT
3. GET /api/merchant/verify â†’ æª¢æŸ¥ç™»å…¥ç‹€æ…‹
4. POST /api/merchant/logout â†’ æ¸…é™¤ Cookie
## ä¿è­·è·¯ç”±
\`\`\`typescript
// middleware.ts
export async function middleware(request: NextRequest) {
  const authToken = request.cookies.get('auth_token');
  
  if (request.nextUrl.pathname.startsWith('/merchant/dashboard')) {
    if (!authToken) {
      return NextResponse.redirect(new URL('/merchant/login', request.url));
    }
  }
}
\`\`\`
5. memory-web-payment.md
# é‡‘æµæ•´åˆ
## é›™è»Œé‡‘æµ
| é‡‘æµ | é©ç”¨å ´æ™¯ | æ•´åˆæ–¹å¼ |
|------|---------|---------|
| Stripe | æµ·å¤–ç”¨æˆ¶ | Checkout Session è·³è½‰ |
| Recur | å°ç£ç”¨æˆ¶ | SDK + redirectToCheckout |
## Recur SDK è¼‰å…¥
\`\`\`html
<Script 
  src="https://unpkg.com/recur-tw@0.11.0/dist/recur.umd.js"
  strategy="beforeInteractive"
/>
\`\`\`
## çµå¸³æµç¨‹
1. ç”¨æˆ¶é¸æ“‡æ–¹æ¡ˆ + é‡‘æµ
2. POST /api/merchant/subscription/checkout
3. Stripe â†’ è·³è½‰ Checkout é é¢
4. Recur â†’ ä½¿ç”¨ SDK redirectToCheckout
5. æˆåŠŸ â†’ /merchant/subscription/success
6. å–æ¶ˆ â†’ /merchant/subscription/cancel
6. memory-web-seo.md
# SEO é é¢è¦ç¯„
## é é¢é¡å‹
| é é¢ | æ¸²æŸ“æ–¹å¼ | æ›´æ–°é »ç‡ |
|------|---------|---------|
| åŸå¸‚åˆ—è¡¨ | SSG + ISR | æ¯æ—¥ |
| åŸå¸‚è©³æƒ… | SSG + ISR | æ¯å°æ™‚ |
| æ™¯é»è©³æƒ… | SSG + ISR | æ¯å°æ™‚ |
## Meta Tags
\`\`\`typescript
// åŸå¸‚é é¢
export async function generateMetadata({ params }): Promise<Metadata> {
  const city = await getCityData(params.slug);
  return {
    title: \`\${city.name} å¿…å»æ™¯é»æ¨è–¦ | Mibu\`,
    description: \`æ¢ç´¢ \${city.name} æœ€ç†±é–€çš„æ™¯é»...\`,
    openGraph: {
      title: \`\${city.name} å¿…å»æ™¯é»æ¨è–¦\`,
      description: \`...\`,
      images: [city.coverImage],
    },
  };
}
\`\`\`
## çµæ§‹åŒ–è³‡æ–™
ä½¿ç”¨ JSON-LD æ¨™è¨˜ï¼š
- åŸå¸‚é ï¼šPlace + ItemList
- æ™¯é»é ï¼šTouristAttraction
æŒ‡ä»¤é›†
å°ˆæ¡ˆåˆå§‹åŒ–
# 1. å»ºç«‹ Next.js å°ˆæ¡ˆ
npx create-next-app@latest mibu-web --typescript --tailwind --eslint --app --src-dir
# 2. å®‰è£ä¾è³´
npm install @tanstack/react-query react-hook-form zod @hookform/resolvers lucide-react framer-motion
# 3. å®‰è£ shadcn/ui
npx shadcn@latest init
# 4. å®‰è£å¸¸ç”¨å…ƒä»¶
npx shadcn@latest add button card input label toast tabs accordion dialog
ç’°å¢ƒè®Šæ•¸è¨­å®š
# .env.local
NEXT_PUBLIC_API_URL=https://591965a7-25f6-479c-b527-3890b1193c21-00-1m08cwv9a4rev.picard.replit.dev
NEXT_PUBLIC_RECUR_PUBLISHABLE_KEY=pk_test_xxx
é–‹ç™¼æŒ‡ä»¤
npm run dev      # é–‹ç™¼æ¨¡å¼
npm run build    # å»ºæ§‹
npm run start    # å•Ÿå‹•ç”Ÿç”¢ç‰ˆ
npm run lint     # ESLint æª¢æŸ¥
é é¢çµæ§‹èˆ‡è·¯ç”±
ç›®éŒ„çµæ§‹
app/
â”œâ”€â”€ layout.tsx              # æ ¹ Layoutï¼ˆHeader + Footerï¼‰
â”œâ”€â”€ page.tsx                # é¦–é 
â”œâ”€â”€ for-business/
â”‚   â”œâ”€â”€ page.tsx            # å•†å®¶åˆä½œé 
â”‚   â””â”€â”€ pricing/
â”‚       â””â”€â”€ page.tsx        # è¨‚é–±æ–¹æ¡ˆé 
â”œâ”€â”€ merchant/
â”‚   â”œâ”€â”€ login/
â”‚   â”‚   â””â”€â”€ page.tsx        # å•†å®¶ç™»å…¥
â”‚   â”œâ”€â”€ dashboard/
â”‚   â”‚   â””â”€â”€ page.tsx        # å•†å®¶å¾Œå°
â”‚   â””â”€â”€ subscription/
â”‚       â”œâ”€â”€ success/
â”‚       â”‚   â””â”€â”€ page.tsx    # ä»˜æ¬¾æˆåŠŸ
â”‚       â””â”€â”€ cancel/
â”‚           â””â”€â”€ page.tsx    # ä»˜æ¬¾å–æ¶ˆ
â”œâ”€â”€ explore/
â”‚   â””â”€â”€ page.tsx            # åŸå¸‚åˆ—è¡¨
â”œâ”€â”€ city/
â”‚   â””â”€â”€ [slug]/
â”‚       â””â”€â”€ page.tsx        # åŸå¸‚è©³æƒ…
â””â”€â”€ place/
    â””â”€â”€ [slug]/
        â””â”€â”€ page.tsx        # æ™¯é»è©³æƒ…
UI/UX è¨­è¨ˆè¦ç¯„
è‰²å½©ç³»çµ±
/* ä¸»è‰²èª¿ */
--primary: #6366F1;       /* Indigo 500 */
--primary-dark: #4F46E5;  /* Indigo 600 */
/* è¼”åŠ©è‰² */
--success: #10B981;       /* Green 500 */
--warning: #F59E0B;       /* Amber 500 */
--error: #EF4444;         /* Red 500 */
/* ä¸­æ€§è‰² */
--background: #FFFFFF;
--foreground: #0F172A;    /* Slate 900 */
--muted: #64748B;         /* Slate 500 */
--border: #E2E8F0;        /* Slate 200 */
éŸ¿æ‡‰å¼æ–·é»
æ–·é»	å¯¬åº¦	ç”¨é€”
sm	640px	æ‰‹æ©Ÿæ©«å‘
md	768px	å¹³æ¿
lg	1024px	ç­†é›»
xl	1280px	æ¡Œæ©Ÿ
é é¢ä½ˆå±€è¦ç¯„
è¨‚é–±æ–¹æ¡ˆé 
// éŸ¿æ‡‰å¼ç¶²æ ¼
<div className="grid grid-cols-1 md:grid-cols-3 gap-6">
  {plans.map((plan) => (
    <PricingCard key={plan.tier} plan={plan} />
  ))}
</div>
æ‰‹æ©Ÿ (<768px)ï¼šå–®æ¬„å †ç–Šï¼Œæ¨è–¦æ–¹æ¡ˆç½®é ‚
å¹³æ¿/æ¡Œæ©Ÿ (â‰¥768px)ï¼šä¸‰æ¬„ä¸¦æ’
ç™»å…¥é 
// é›™æ¬„åˆ†å‰²
<div className="min-h-screen flex">
  {/* å“ç‰Œå€ï¼šæ‰‹æ©Ÿéš±è— */}
  <div className="hidden lg:flex lg:w-1/2 bg-primary items-center justify-center">
    <BrandIllustration />
  </div>
  
  {/* è¡¨å–®å€ */}
  <div className="w-full lg:w-1/2 flex items-center justify-center p-6">
    <LoginForm className="w-full max-w-md" />
  </div>
</div>
æ‰‹æ©Ÿï¼šå…¨å¯¬è¡¨å–®ï¼ŒLogo ä¸Šæ–¹
æ¡Œæ©Ÿï¼šå·¦å´å“ç‰Œå€ + å³å´ç™»å…¥è¡¨å–®
å•†å®¶å¾Œå°
// Sidebar + Content
<div className="flex min-h-screen">
  {/* Sidebarï¼šæ‰‹æ©Ÿç‚ºåº•éƒ¨å°èˆªæˆ–æ¼¢å ¡é¸å–® */}
  <aside className="hidden md:block w-64 border-r">
    <DashboardNav />
  </aside>
  
  {/* ä¸»å…§å®¹å€ */}
  <main className="flex-1 p-6">
    {children}
  </main>
  
  {/* æ‰‹æ©Ÿåº•éƒ¨å°èˆª */}
  <nav className="md:hidden fixed bottom-0 left-0 right-0 border-t bg-white">
    <MobileNav />
  </nav>
</div>
å…ƒä»¶è¨­è¨ˆè¦ç¯„
PricingCard
interface PricingCardProps {
  plan: SubscriptionPlan;
  isCurrentPlan?: boolean;
  onSelect?: () => void;
}
// æ¨£å¼è¦é»
// - æ¨è–¦æ–¹æ¡ˆ: ring-2 ring-primary + æ¨™ç±¤
// - åƒ¹æ ¼çªå‡ºé¡¯ç¤º (text-4xl font-bold)
// - åŠŸèƒ½åˆ—è¡¨ä½¿ç”¨ check icon
// - CTA æŒ‰éˆ•å›ºå®šåœ¨åº•éƒ¨
è¨‚é–±ç‹€æ…‹å¡ç‰‡
// ç‹€æ…‹é¡è‰²æ˜ å°„
const statusColors = {
  active: 'bg-green-100 text-green-800',
  past_due: 'bg-yellow-100 text-yellow-800',
  canceling: 'bg-orange-100 text-orange-800',
  expired: 'bg-red-100 text-red-800',
};
API æ•´åˆæŒ‡å—
æ ¸å¿ƒ API ç«¯é»
å…¬é–‹ API
æ–¹æ³•	ç«¯é»	èªªæ˜
GET	/api/subscription-plans	è¨‚é–±æ–¹æ¡ˆåˆ—è¡¨
GET	/api/seo/cities	åŸå¸‚åˆ—è¡¨
GET	/api/seo/cities/:slug	åŸå¸‚è©³æƒ…
GET	/api/seo/places/:slug	æ™¯é»è©³æƒ…
èªè­‰ API
æ–¹æ³•	ç«¯é»	èªªæ˜
POST	/api/merchant/login	å•†å®¶ç™»å…¥
POST	/api/merchant/logout	å•†å®¶ç™»å‡º
GET	/api/merchant/verify	é©—è­‰ç™»å…¥ç‹€æ…‹
è¨‚é–± APIï¼ˆéœ€ç™»å…¥ï¼‰
æ–¹æ³•	ç«¯é»	èªªæ˜
GET	/api/merchant/subscription	ç•¶å‰è¨‚é–±ç‹€æ…‹
POST	/api/merchant/subscription/checkout	å»ºç«‹çµå¸³ Session
POST	/api/merchant/subscription/cancel	å–æ¶ˆè¨‚é–±
TypeScript é¡å‹
// types/subscription.ts
export type SubscriptionTier = 'free' | 'pro' | 'premium' | 'partner';
export type SubscriptionStatus = 'active' | 'cancelled' | 'past_due' | 'trialing';
export type PaymentProvider = 'stripe' | 'recur';
export interface SubscriptionPlan {
  tier: SubscriptionTier;
  name: string;
  nameEn: string;
  priceMonthly: number;
  priceYearly: number | null;
  pricePeriodLabel: string;
  features: string[];
  buttonText: string;
  highlighted: boolean;
  highlightLabel: string | null;
  maxPlaces: number;
  maxCoupons: number;
  hasAdvancedAnalytics: boolean;
  hasPriorityExposure: boolean;
  hasDedicatedSupport: boolean;
}
// types/merchant.ts
export interface Merchant {
  id: number;
  name: string;
  email: string;
  level: SubscriptionTier;
  avatarUrl?: string;
}
export interface MerchantSubscription {
  id: number;
  tier: SubscriptionTier;
  status: SubscriptionStatus;
  currentPeriodEnd: string;
  cancelAtPeriodEnd: boolean;
}
é‡‘æµæ•´åˆ
Stripe æµç¨‹
async function handleStripeCheckout(tier: 'pro' | 'premium') {
  const res = await apiClient<{ url: string }>(
    '/api/merchant/subscription/checkout',
    {
      method: 'POST',
      body: JSON.stringify({
        type: 'merchant',
        tier,
        provider: 'stripe',
      }),
    }
  );
  
  // è·³è½‰è‡³ Stripe Checkout
  window.location.href = res.url;
}
Recur æµç¨‹
async function handleRecurCheckout(tier: 'pro' | 'premium') {
  const res = await apiClient<{
    productId: string;
    publishableKey: string;
    customerEmail: string;
    externalCustomerId: string;
    successUrl: string;
    cancelUrl: string;
  }>(
    '/api/merchant/subscription/checkout',
    {
      method: 'POST',
      body: JSON.stringify({
        type: 'merchant',
        tier,
        provider: 'recur',
      }),
    }
  );
  
  // ä½¿ç”¨ Recur SDK
  const recur = (window as any).RecurCheckout.init({
    publishableKey: res.publishableKey,
  });
  
  await recur.redirectToCheckout({
    productId: res.productId,
    externalCustomerId: res.externalCustomerId,
    customerEmail: res.customerEmail,
    successUrl: res.successUrl,
    cancelUrl: res.cancelUrl,
  });
}
SEO è¦ç¯„
Meta Tags ç¯„æœ¬
// app/city/[slug]/page.tsx
export async function generateMetadata({ params }): Promise<Metadata> {
  const city = await getCityData(params.slug);
  
  if (!city) {
    return { title: 'æ‰¾ä¸åˆ°åŸå¸‚ | Mibu' };
  }
  
  return {
    title: `${city.name} å¿…å»æ™¯é»æ¨è–¦ | Mibu`,
    description: `æ¢ç´¢ ${city.name} æœ€ç†±é–€çš„ ${city.placesCount} å€‹æ™¯é»ï¼ŒåŒ…å«ç¾é£Ÿã€è³¼ç‰©ã€æ™¯é»ç­‰åˆ†é¡ã€‚`,
    keywords: `${city.name}, æ—…éŠ, æ™¯é», æ¨è–¦`,
    openGraph: {
      type: 'website',
      title: `${city.name} å¿…å»æ™¯é»æ¨è–¦ | Mibu`,
      description: `æ¢ç´¢ ${city.name} æœ€ç†±é–€çš„æ™¯é»...`,
      images: [
        {
          url: city.coverImage,
          width: 1200,
          height: 630,
          alt: city.name,
        },
      ],
    },
    twitter: {
      card: 'summary_large_image',
      title: `${city.name} å¿…å»æ™¯é»æ¨è–¦`,
      description: `æ¢ç´¢ ${city.name} æœ€ç†±é–€çš„æ™¯é»...`,
      images: [city.coverImage],
    },
  };
}
çµæ§‹åŒ–è³‡æ–™
// åŸå¸‚é é¢ JSON-LD
const cityJsonLd = {
  '@context': 'https://schema.org',
  '@type': 'ItemList',
  name: `${city.name} ç†±é–€æ™¯é»`,
  itemListElement: places.map((place, index) => ({
    '@type': 'ListItem',
    position: index + 1,
    item: {
      '@type': 'TouristAttraction',
      name: place.name,
      description: place.description,
      image: place.coverImage,
      address: {
        '@type': 'PostalAddress',
        addressLocality: city.name,
      },
    },
  })),
};
ISR è¨­å®š
// åŸå¸‚é é¢ï¼šæ¯å°æ™‚é‡æ–°é©—è­‰
export const revalidate = 3600;
// æ™¯é»é é¢ï¼šæ¯å°æ™‚é‡æ–°é©—è­‰
export const revalidate = 3600;
// éœæ…‹è·¯å¾‘ç”Ÿæˆ
export async function generateStaticParams() {
  const cities = await getCities();
  return cities.map((city) => ({ slug: city.slug }));
}
éƒ¨ç½²æµç¨‹
Replit éƒ¨ç½²
è¨­å®šç’°å¢ƒè®Šæ•¸
åŸ·è¡Œ npm run build
é»æ“Š Deploy æŒ‰éˆ•
ç­‰å¾…éƒ¨ç½²å®Œæˆ
ç’°å¢ƒè®Šæ•¸è¨­å®š
è®Šæ•¸	é–‹ç™¼å€¼	ç”Ÿç”¢å€¼
NEXT_PUBLIC_API_URL	é–‹ç™¼å¾Œç«¯ URL	ç”Ÿç”¢å¾Œç«¯ URL
NEXT_PUBLIC_RECUR_PUBLISHABLE_KEY	pk_test_xxx	pk_live_xxx
éƒ¨ç½²å‰æª¢æŸ¥æ¸…å–®
 ç’°å¢ƒè®Šæ•¸å·²è¨­å®šæ­£ç¢º
 CORS å·²å…è¨±å®˜ç¶²åŸŸå
 Meta Tags å·²è¨­å®š
 çµæ§‹åŒ–è³‡æ–™å·²é©—è­‰
 éŸ¿æ‡‰å¼è¨­è¨ˆå·²æ¸¬è©¦
 é‡‘æµæµç¨‹å·²æ¸¬è©¦
ç‰ˆæœ¬ç´€éŒ„
ç‰ˆæœ¬	æ—¥æœŸ	è®Šæ›´å…§å®¹
2.0	2026-01-05	å®Œæ•´é‡æ§‹è—åœ–ï¼Œæ–°å¢è¨˜æ†¶åº«ã€æŒ‡ä»¤é›†ã€UI/UX è¦ç¯„
1.2	2026-01-05	æ–°å¢éŸ¿æ‡‰å¼è¨­è¨ˆè¦ç¯„
1.1	2026-01-05	æ–°å¢å‹•æ…‹è¨‚é–±æ–¹æ¡ˆ API
1.0	2026-01-04	åˆç‰ˆåŒæ­¥è—åœ–
è¯çµ¡çª—å£
å¾Œç«¯ API å•é¡Œè«‹è¯ç¹«ï¼šå¾Œç«¯é¦–å¸­æ¶æ§‹å¸«ï¼ˆReplit å¾Œç«¯å°ˆæ¡ˆï¼‰

æ›´æ–° API æ™‚ï¼Œå¾Œç«¯æœƒç™¼é€ã€ŒğŸŒ çµ¦å®˜ç¶²çš„åŒæ­¥æŒ‡ä»¤ã€ï¼ŒåŒ…å«ï¼š

Endpoint è®Šæ›´
TypeScript Interface
cURL ç¯„ä¾‹
UI å¯¦ä½œå»ºè­°